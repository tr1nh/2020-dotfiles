#!/bin/bash

# A simple script to do screenrecord using ffmpeg
# Install ffmpeg first if You didn't have
# I usually launch this script using rofi
# Cheers! Addy

A="$(pacmd list-sources | grep -PB 1 "analog.*monitor>" | head -n 1 | perl -pe 's/.* //g')"
F="$(date --iso-8601=minutes | perl -pe 's/[^0-9]+//g').mkv"
V="$(xdpyinfo | grep dimensions | perl -pe 's/.* ([0-9]+x[0-9]+) .*/$1/g')"

ffmpeg -loglevel error \
-video_size "$V" \
-f x11grab \
-i :0.0 \
-f pulse \
-i "$A" \
-f pulse \
-i default \
-filter_complex amerge \
-ac 2 \
-quality realtime \
-y ~/Videos/`date +"%Y%m%d%H%M%S"`-video-record.mkv
#-preset veryfast "$F"


#ffmpeg -f x11grab \
#-s 1366x768 \
#-an -i :0.0 \
#-c:v libvpx \
#-b:v 5M \
#-crf 10 \
#-quality realtime \
#-y ~/Videos/record_`date +"%Y-%m-%d-%H-%M-%S"`.mkv
